{
  "version": 4,
  "terraform_version": "0.15.5",
  "serial": 58,
  "lineage": "b5922c90-674a-0fdf-1d3b-b7b014403f8d",
  "outputs": {
    "alert_id": {
      "value": "1393975",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "newrelic_entity",
      "name": "app_name",
      "provider": "provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": 3029157,
            "application_id": 517285192,
            "domain": "APM",
            "guid": "MzAyOTE1N3xBUE18QVBQTElDQVRJT058NTE3Mjg1MTky",
            "id": "MzAyOTE1N3xBUE18QVBQTElDQVRJT058NTE3Mjg1MTky",
            "ignore_case": false,
            "name": "petclinic-java",
            "serving_apm_application_id": null,
            "tag": null,
            "type": "APPLICATION"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "newrelic_alert_channel",
      "name": "tf_alert_email",
      "provider": "provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "config": [
              {
                "api_key": "",
                "auth_password": "",
                "auth_type": "",
                "auth_username": "",
                "base_url": "",
                "channel": "",
                "headers": null,
                "headers_string": "",
                "include_json_attachment": "false",
                "key": "",
                "payload": null,
                "payload_string": "",
                "payload_type": "",
                "recipients": "gnarasimhadevara@newrelic.com",
                "region": "",
                "route_key": "",
                "service_key": "",
                "tags": "",
                "teams": "",
                "url": "",
                "user_id": ""
              }
            ],
            "id": "5232394",
            "name": "TF-Alerts-As-Code-Notification-Channel-Email",
            "type": "email"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "newrelic_alert_policy",
      "name": "tf_alert_policy_as_code",
      "provider": "provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": 3029157,
            "channel_ids": null,
            "id": "1393975",
            "incident_preference": "PER_POLICY",
            "name": "TF-Alerts-As-Code-Policy"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "newrelic_alert_policy_channel",
      "name": "tf_alert_email",
      "provider": "provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "channel_ids": [
              5232394
            ],
            "id": "1393975:5232394",
            "policy_id": 1393975
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "newrelic_alert_channel.tf_alert_email",
            "newrelic_alert_policy.tf_alert_policy_as_code"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "newrelic_nrql_alert_condition",
      "name": "tf_alert_condition_appdex",
      "provider": "provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": 3029157,
            "aggregation_window": 60,
            "baseline_direction": null,
            "close_violations_on_expiration": false,
            "critical": [
              {
                "duration": 0,
                "operator": "below",
                "threshold": 0.8,
                "threshold_duration": 300,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ],
            "description": "Alert when Apdex score drop below 0.9 for more tahn 5 mins",
            "enabled": true,
            "expected_groups": null,
            "expiration_duration": 0,
            "fill_option": null,
            "fill_value": 0,
            "id": "1393975:20908058",
            "ignore_overlap": null,
            "name": "TF-Alerts-As-Code-Condition-Appdex",
            "nrql": [
              {
                "evaluation_offset": 3,
                "query": "SELECT apdex(`apm.service.apdex`) FROM Metric WHERE appName LIKE 'petclinic-java'",
                "since_value": ""
              }
            ],
            "open_violation_on_expiration": false,
            "open_violation_on_group_overlap": null,
            "policy_id": 1393975,
            "runbook_url": "",
            "term": [],
            "type": "static",
            "value_function": "SINGLE_VALUE",
            "violation_time_limit": null,
            "violation_time_limit_seconds": 1800,
            "warning": [
              {
                "duration": 0,
                "operator": "below",
                "threshold": 0.9,
                "threshold_duration": 300,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "newrelic_alert_policy.tf_alert_policy_as_code"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "newrelic_nrql_alert_condition",
      "name": "tf_alert_condition_error_rate",
      "provider": "provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": 3029157,
            "aggregation_window": 60,
            "baseline_direction": null,
            "close_violations_on_expiration": false,
            "critical": [
              {
                "duration": 0,
                "operator": "above",
                "threshold": 10,
                "threshold_duration": 300,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ],
            "description": "Alert when Error Rate spikes beyond 10% for more tahn 5 mins",
            "enabled": true,
            "expected_groups": null,
            "expiration_duration": 0,
            "fill_option": null,
            "fill_value": 0,
            "id": "1393975:20908060",
            "ignore_overlap": null,
            "name": "TF-Alerts-As-Code-Condition-ErrorRate",
            "nrql": [
              {
                "evaluation_offset": 3,
                "query": "SELECT percentage(count(*), WHERE error is true) AS 'Error rate' FROM Transaction WHERE appName LIKE 'petclinic-java'",
                "since_value": ""
              }
            ],
            "open_violation_on_expiration": false,
            "open_violation_on_group_overlap": null,
            "policy_id": 1393975,
            "runbook_url": "",
            "term": [],
            "type": "static",
            "value_function": "SINGLE_VALUE",
            "violation_time_limit": null,
            "violation_time_limit_seconds": 1800,
            "warning": [
              {
                "duration": 0,
                "operator": "above",
                "threshold": 5,
                "threshold_duration": 300,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "newrelic_alert_policy.tf_alert_policy_as_code"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "newrelic_nrql_alert_condition",
      "name": "tf_alert_condition_infra_cpu",
      "provider": "provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": 3029157,
            "aggregation_window": 60,
            "baseline_direction": null,
            "close_violations_on_expiration": false,
            "critical": [
              {
                "duration": 0,
                "operator": "above",
                "threshold": 90,
                "threshold_duration": 300,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ],
            "description": "Alert when CPU Utilization on host spikes beyond 90% for more than 5 mins",
            "enabled": true,
            "expected_groups": null,
            "expiration_duration": 0,
            "fill_option": null,
            "fill_value": 0,
            "id": "1393975:20908057",
            "ignore_overlap": null,
            "name": "TF-Alerts-As-Code-Condition-Infra-CPU",
            "nrql": [
              {
                "evaluation_offset": 3,
                "query": "SELECT average(host.cpuPercent) FROM Metric WHERE host.hostname LIKE '%'",
                "since_value": ""
              }
            ],
            "open_violation_on_expiration": false,
            "open_violation_on_group_overlap": null,
            "policy_id": 1393975,
            "runbook_url": "",
            "term": [],
            "type": "static",
            "value_function": "SINGLE_VALUE",
            "violation_time_limit": null,
            "violation_time_limit_seconds": 1800,
            "warning": [
              {
                "duration": 0,
                "operator": "above",
                "threshold": 80,
                "threshold_duration": 300,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "newrelic_alert_policy.tf_alert_policy_as_code"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "newrelic_nrql_alert_condition",
      "name": "tf_alert_condition_latency",
      "provider": "provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": 3029157,
            "aggregation_window": 60,
            "baseline_direction": null,
            "close_violations_on_expiration": false,
            "critical": [
              {
                "duration": 0,
                "operator": "above",
                "threshold": 1,
                "threshold_duration": 300,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ],
            "description": "Alert when Latency increased above 1 sec for more tahn 5 mins",
            "enabled": true,
            "expected_groups": null,
            "expiration_duration": 0,
            "fill_option": null,
            "fill_value": 0,
            "id": "1393975:20908056",
            "ignore_overlap": null,
            "name": "TF-Alerts-As-Code-Condition-Latency",
            "nrql": [
              {
                "evaluation_offset": 3,
                "query": "SELECT average(`apm.service.transaction.duration`) FROM Metric WHERE appName LIKE 'petclinic-java'",
                "since_value": ""
              }
            ],
            "open_violation_on_expiration": false,
            "open_violation_on_group_overlap": null,
            "policy_id": 1393975,
            "runbook_url": "",
            "term": [],
            "type": "static",
            "value_function": "SINGLE_VALUE",
            "violation_time_limit": null,
            "violation_time_limit_seconds": 1800,
            "warning": [
              {
                "duration": 0,
                "operator": "above",
                "threshold": 0.75,
                "threshold_duration": 300,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "newrelic_alert_policy.tf_alert_policy_as_code"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "newrelic_nrql_alert_condition",
      "name": "tf_alert_condition_throughput",
      "provider": "provider[\"registry.terraform.io/newrelic/newrelic\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": 3029157,
            "aggregation_window": 60,
            "baseline_direction": null,
            "close_violations_on_expiration": false,
            "critical": [
              {
                "duration": 0,
                "operator": "below",
                "threshold": 0.5,
                "threshold_duration": 300,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ],
            "description": "Alert when Throughput drops below 0.5 for more than 5 mins",
            "enabled": true,
            "expected_groups": null,
            "expiration_duration": 0,
            "fill_option": null,
            "fill_value": 0,
            "id": "1393975:20908059",
            "ignore_overlap": null,
            "name": "TF-Alerts-As-Code-Condition-Throughput",
            "nrql": [
              {
                "evaluation_offset": 3,
                "query": "SELECT rate(count(apm.service.transaction.duration), 1 minute) FROM Metric WHERE appName LIKE 'petclinic-java'",
                "since_value": ""
              }
            ],
            "open_violation_on_expiration": false,
            "open_violation_on_group_overlap": null,
            "policy_id": 1393975,
            "runbook_url": "",
            "term": [],
            "type": "static",
            "value_function": "SINGLE_VALUE",
            "violation_time_limit": null,
            "violation_time_limit_seconds": 1800,
            "warning": [
              {
                "duration": 0,
                "operator": "below",
                "threshold": 0.75,
                "threshold_duration": 300,
                "threshold_occurrences": "all",
                "time_function": ""
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "newrelic_alert_policy.tf_alert_policy_as_code"
          ]
        }
      ]
    }
  ]
}
